import React, { useState, useEffect } from 'react';
import Img from '../assets/images/itahari.jpg'
import Img1 from '../assets/images/Itahari1.jpg'
import Img2 from '../assets/images/Itahari_Chowk.jpg'
import Img3 from '../assets/images/sagarmatha.jfif'
import Img4 from '../assets/images/ward1.webp'


interface ImageData {
  url: string;
  title: string;
  subtitle: string;
  fallback: string;
}

interface ServiceData {
  title: string;
  description: string;
  icon: string;
}

interface StatData {
  number: string;
  label: string;
}

interface ImageErrors {
  [key: number]: boolean;
}

const LandingPage: React.FC = () => {
  const [currentSlide, setCurrentSlide] = useState < number > (0);
  const [isLoaded, setIsLoaded] = useState < boolean > (false);
  const [imageErrors, setImageErrors] = useState < ImageErrors > ({});

  // Updated image URLs with fallbacks
  const images: ImageData[] = [
    {
      url: Img,
      title: '‡§á‡§ü‡§π‡§∞‡•Ä ‡§â‡§™‡§Æ‡§π‡§æ‡§®‡§ó‡§∞‡§™‡§æ‡§≤‡§ø‡§ï‡§æ',
      subtitle: '‡§™‡•ç‡§∞‡§ó‡§§‡§ø‡§∂‡•Ä‡§≤ ‡§∂‡§π‡§∞‡§ï‡•ã ‡§®‡§Æ‡•Å‡§®‡§æ',
      fallback: Img4,
    },
    {
      url: Img1,
      title: '‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§®‡§ø‡§ï ‡§≠‡§µ‡§®',
      subtitle: '‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§∏‡•á‡§µ‡§æ‡§ï‡•ã ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡§¨‡§ø‡§®‡•ç‡§¶‡•Å',
      fallback: Img,
    },
    {
      url: Img2,
      title: '‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§µ‡§ø‡§ï‡§æ‡§∏',
      subtitle: '‡§∏‡§¨‡•à ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§ï‡•ã ‡§â‡§®‡•ç‡§®‡§§‡§ø‡§Æ‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§¶‡•ç‡§ß',
      fallback: Img1
    },
    {
      url: Img3,
      title: '‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§µ‡§ø‡§ï‡§æ‡§∏',
      subtitle: '‡§∏‡§¨‡•à ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§ï‡•ã ‡§â‡§®‡•ç‡§®‡§§‡§ø‡§Æ‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§¶‡•ç‡§ß',
      fallback: Img2,
    },
    {
      url: Img4,
      title: '‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§µ‡§ø‡§ï‡§æ‡§∏',
      subtitle: '‡§∏‡§¨‡•à ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§ï‡•ã ‡§â‡§®‡•ç‡§®‡§§‡§ø‡§Æ‡§æ ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§¶‡•ç‡§ß',
      fallback: Img3,
    }
  ];

  const services: ServiceData[] = [
    {
      title: '‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§§‡§æ',
      description: '‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§§‡§æ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞ ‡§∏‡•á‡§µ‡§æ',
      icon: 'üèõÔ∏è'
    },
    {
      title: '‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞ ‡§¶‡§∞‡•ç‡§§‡§æ',
      description: '‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞‡§ø‡§ï ‡§¶‡§∞‡•ç‡§§‡§æ ‡§∞ ‡§≤‡§æ‡§á‡§∏‡•á‡§®‡•ç‡§∏',
      icon: 'üíº'
    },
    {
      title: '‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ',
      description: '‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§≠‡§§‡•ç‡§§‡§æ',
      icon: 'ü§ù'
    },
    {
      title: '‡§ï‡§∞‡§™‡•ã‡§§ ‡§∏‡•á‡§µ‡§æ',
      description: '‡§ò‡§∞‡§ú‡§ó‡•ç‡§ó‡§æ ‡§∞ ‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞‡§ø‡§ï ‡§ï‡§∞',
      icon: 'üìã'
    }
  ];

  const stats: StatData[] = [
    { number: '20', label: '‡§µ‡§°‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ' },
    { number: '2,00,000+', label: '‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ' },
    { number: '500+', label: '‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡•Ä' },
    { number: '50+', label: '‡§∏‡•á‡§µ‡§æ‡§π‡§∞‡•Ç' }
  ];

  const handleImageError = (index: number): void => {
    setImageErrors(prev => ({
      ...prev,
      [index]: true
    }));
  };

  const handleImageLoad = (index: number): void => {
    setImageErrors(prev => {
      const newErrors = { ...prev };
      delete newErrors[index];
      return newErrors;
    });
  };

  const nextSlide = (): void => {
    setCurrentSlide((prev) => (prev + 1) % images.length);
  };

  const prevSlide = (): void => {
    setCurrentSlide((prev) => (prev - 1 + images.length) % images.length);
  };

  const goToSlide = (index: number): void => {
    setCurrentSlide(index);
  };

  useEffect(() => {
    setIsLoaded(true);
    const interval = setInterval(() => {
      setCurrentSlide((prev) => (prev + 1) % images.length);
    }, 5000);
    return () => clearInterval(interval);
  }, [images.length]);

  return (
    <div className="min-h-screen bg-gray-50">
      {/* Hero Section with Image Slider */}
      <div className="relative h-screen overflow-hidden">
        {/* Background Images - Fixed positioning */}
        <div className="absolute inset-0">
          {images.map((image, index) => (
            <div
              key={index}
              className={`absolute inset-0 transition-opacity duration-1000 ease-in-out ${index === currentSlide ? 'opacity-100' : 'opacity-0'
                }`}
            >
              <img
                src={imageErrors[index] ? image.fallback : image.url}
                alt={image.title}
                className="w-full h-full object-cover"
                onError={() => handleImageError(index)}
                onLoad={() => handleImageLoad(index)}
              />
              <div className="absolute inset-0 bg-gradient-to-b from-black/30 via-black/50 to-black/70"></div>
            </div>
          ))}
        </div>

        {/* Hero Content */}
        <div className="relative z-10 flex items-center justify-center h-full text-white">
          <div className={`text-center px-6 transform transition-all duration-1000 ${isLoaded ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'
            }`}>
            <div className="mb-8">
              <div className="inline-block p-4 bg-blue-600 rounded-full mb-6 animate-pulse">
                <span className="text-4xl">üèõÔ∏è</span>
              </div>
            </div>
            <h1 className="text-5xl md:text-7xl font-bold text-black-600 mb-4 font-mono tracking-wide drop-shadow-lg">
              ‡§á‡§ü‡§π‡§∞‡•Ä ‡§â‡§™‡§Æ‡§π‡§æ‡§®‡§ó‡§∞‡§™‡§æ‡§≤‡§ø‡§ï‡§æ
            </h1>
            <h1 className="text-4xl md:text-7xl font-bold mb-4 font-mono tracking-wide drop-shadow-lg">
              ‡•ß ‡§®‡§Æ‡•ç‡§µ‡§∞ ‡§µ‡§°‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø
            </h1>
            <p className="text-xl md:text-2xl mb-2 text-gray-200 drop-shadow-md">
              Itahari Sub-Metropolitan City
            </p>
            <p className="text-lg md:text-xl mb-8 text-gray-300 drop-shadow-md">
              ‡§∏‡•Å‡§®‡§∏‡§∞‡•Ä ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ, ‡§™‡•ç‡§∞‡§¶‡•á‡§∂ ‡§®‡§Ç. ‡•ß, ‡§®‡•á‡§™‡§æ‡§≤
            </p>

            {/* Dynamic Subtitle */}
            <div className="h-16 mb-8">
              <h2 className="text-2xl md:text-3xl font-semibold text-yellow-300 drop-shadow-lg animate-pulse">
                {images[currentSlide].subtitle}
              </h2>
            </div>

            {/* CTA Buttons */}
            <div className="flex flex-col sm:flex-row gap-4 justify-center">
              <button className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg text-lg font-semibold transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl">
                ‡§∏‡•á‡§µ‡§æ‡§π‡§∞‡•Ç ‡§π‡•á‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
              </button>
              <button className="bg-transparent border-2 border-white text-white hover:bg-white hover:text-blue-600 px-8 py-4 rounded-lg text-lg font-semibold transform hover:scale-105 transition-all duration-300 backdrop-blur-sm">
                ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
              </button>
            </div>
          </div>
        </div>

        {/* Slide Indicators */}
        <div className="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2 z-20">
          {images.map((_, index) => (
            <button
              key={index}
              onClick={() => goToSlide(index)}
              className={`w-3 h-3 rounded-full transition-all duration-300 ${index === currentSlide ? 'bg-white scale-125' : 'bg-white/50 hover:bg-white/75'
                }`}
            />
          ))}
        </div>

        {/* Navigation Arrows */}
        <button
          onClick={prevSlide}
          className="absolute left-4 top-1/2 transform -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full transition-all duration-300 backdrop-blur-sm z-20"
          aria-label="Previous slide"
        >
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <button
          onClick={nextSlide}
          className="absolute right-4 top-1/2 transform -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-3 rounded-full transition-all duration-300 backdrop-blur-sm z-20"
          aria-label="Next slide"
        >
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>

      {/* Stats Section */}
      <div className="py-16 bg-gray-200">
        <div className="container mx-auto px-6">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center text-black">
            {stats.map((stat, index) => (
              <div
                key={index}
                className={`transform transition-all duration-700 hover:scale-105 ${isLoaded ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'
                  }`}
                style={{ transitionDelay: `${index * 200}ms` }}
              >
                <div className="text-4xl md:text-5xl font-bold mb-2 drop-shadow-lg">{stat.number}</div>
                <div className="text-lg text-black font-bold">{stat.label}</div>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Services Section */}
      <div className="py-20 bg-gray-50">
        <div className="container mx-auto px-6">
          <div className="text-center mb-16">
            <h2 className="text-4xl md:text-5xl font-bold text-gray-800 mb-4 font-mono">
              ‡§π‡§æ‡§Æ‡•ç‡§∞‡§æ ‡§∏‡•á‡§µ‡§æ‡§π‡§∞‡•Ç
            </h2>
            <p className="text-xl text-gray-600 max-w-2xl mx-auto">
              ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§π‡§∞‡•Ç‡§ï‡•ã ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§ï‡§æ ‡§≤‡§æ‡§ó‡§ø ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞‡§ï‡§æ ‡§∏‡•á‡§µ‡§æ‡§π‡§∞‡•Ç ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§õ‡§®‡•ç
            </p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            {services.map((service, index) => (
              <div
                key={index}
                className={`bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transform transition-all duration-500 hover:-translate-y-2 cursor-pointer border-l-4 border-blue-500 group ${isLoaded ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'
                  }`}
                style={{ transitionDelay: `${index * 150}ms` }}
              >
                <div className="text-5xl mb-4 transform group-hover:scale-110 transition-transform duration-300">{service.icon}</div>
                <h3 className="text-xl font-semibold text-gray-800 mb-3">{service.title}</h3>
                <p className="text-gray-600">{service.description}</p>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* About Section */}
      <div className="py-20 bg-white">
        <div className="container mx-auto px-6">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div className={`transform transition-all duration-700 ${isLoaded ? 'translate-x-0 opacity-100' : '-translate-x-10 opacity-0'
              }`}>
              <h2 className="text-4xl md:text-5xl font-bold text-gray-800 mb-6 font-mono">
                ‡§π‡§æ‡§Æ‡•ç‡§∞‡•ã ‡§¨‡§æ‡§∞‡•á‡§Æ‡§æ
              </h2>
              <p className="text-lg text-gray-600 mb-6 leading-relaxed">
                ‡§á‡§ü‡§π‡§∞‡•Ä ‡§â‡§™‡§Æ‡§π‡§æ‡§®‡§ó‡§∞‡§™‡§æ‡§≤‡§ø‡§ï‡§æ ‡§∏‡•Å‡§®‡§∏‡§∞‡•Ä ‡§ú‡§ø‡§≤‡•ç‡§≤‡§æ‡§ï‡•ã ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞‡§ø‡§ï ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞ ‡§π‡•ã‡•§ ‡§Ø‡§π‡§æ‡§Å ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§®
                ‡§ú‡§æ‡§§‡§ú‡§æ‡§§‡§ø‡§ï‡§æ ‡§Æ‡§æ‡§®‡§ø‡§∏‡§π‡§∞‡•Ç ‡§Æ‡§ø‡§≤‡•á‡§∞ ‡§¨‡§∏‡§ø‡§∞‡§π‡•á‡§ï‡§æ ‡§õ‡§®‡•ç‡•§ ‡§Ø‡•ã ‡§∂‡§π‡§∞ ‡§Ü‡§∞‡•ç‡§•‡§ø‡§ï ‡§µ‡§ø‡§ï‡§æ‡§∏‡§ï‡•ã ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡•á‡§®‡•ç‡§¶‡•ç‡§∞
                ‡§≠‡§è‡§ï‡•ã ‡§õ‡•§
              </p>
              <p className="text-lg text-gray-600 mb-8 leading-relaxed">
                ‡§π‡§æ‡§Æ‡•Ä ‡§∏‡§¨‡•à ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§π‡§∞‡•Ç‡§≤‡§æ‡§à ‡§ó‡•Å‡§£‡§∏‡•ç‡§§‡§∞‡•Ä‡§Ø ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ó‡§∞‡•ç‡§® ‡§™‡•ç‡§∞‡§§‡§ø‡§¨‡§¶‡•ç‡§ß ‡§õ‡•å‡§Ç‡•§ ‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï
                ‡§™‡•ç‡§∞‡§µ‡§ø‡§ß‡§ø‡§ï‡•ã ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§∞‡•á‡§∞ ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§µ‡§æ‡§π‡§≤‡§æ‡§à ‡§∏‡§π‡§ú ‡§¨‡§®‡§æ‡§â‡§®‡•á ‡§ï‡§æ‡§Æ ‡§ó‡§∞‡§ø‡§∞‡§π‡•á‡§ï‡§æ ‡§õ‡•å‡§Ç‡•§
              </p>
              <button className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg text-lg font-semibold transform hover:scale-105 transition-all duration-300 shadow-lg">
                ‡§•‡§™ ‡§ú‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç
              </button>
            </div>

            <div className={`transform transition-all duration-700 ${isLoaded ? 'translate-x-0 opacity-100' : 'translate-x-10 opacity-0'
              }`}>
              <div className="relative group">
                <img
                  src="https://itaharimun.gov.np/sites/itaharimun.gov.np/files/gallery/itahari_parisar.jpg"
                  alt="Itahari Office"
                  className="w-full h-80 object-cover rounded-xl shadow-2xl transform group-hover:scale-105 transition-transform duration-300"
                />
                <div className="absolute inset-0 bg-gradient-to-t from-blue-600/20 to-transparent rounded-xl"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* CTA Section */}
      <div className="py-20 bg-blue-200">
        <div className="container mx-auto px-6 text-center">
          <h2 className="text-4xl md:text-5xl font-bold text-black mb-6 font-mono">
            ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§∏‡•á‡§µ‡§æ‡§Æ‡§æ ‡§∏‡§ß‡•à‡§Ç ‡§§‡§§‡•ç‡§™‡§∞
          </h2>
          <p className="text-xl text-gray-700 mb-8 max-w-3xl mx-auto">
            ‡§π‡§æ‡§Æ‡•ç‡§∞‡•ã ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§∏‡§¨‡•à ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï‡§π‡§∞‡•Ç‡§≤‡§æ‡§à ‡§∏‡§π‡§ú ‡§∞ ‡§õ‡§ø‡§ü‡•ã ‡§∏‡•á‡§µ‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ó‡§∞‡•ç‡§®‡•Å ‡§π‡•ã‡•§
            ‡§§‡§™‡§æ‡§à‡§Ç‡§ï‡•ã ‡§ï‡•Å‡§®‡•à ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§õ ‡§≠‡§®‡•á ‡§π‡§æ‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button className="bg-white text-blue-600 hover:bg-gray-100 px-8 py-4 rounded-lg text-lg font-semibold transform hover:scale-105 transition-all duration-300 shadow-lg">
              ‡§Ö‡§®‡§≤‡§æ‡§á‡§® ‡§∏‡•á‡§µ‡§æ
            </button>
            <button className="bg-transparent border-2 border-white text-white hover:bg-white hover:text-blue-600 px-8 py-4 rounded-lg text-lg font-semibold transform hover:scale-105 transition-all duration-300">
              ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§≠‡•ç‡§∞‡§Æ‡§£
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default LandingPage;